<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tienda de camisetas</title>
  </head>
  <body>
    <h1>Tienda de camisetas</h1>
    <ul id="product-list">
      {{#each products}}
        <li id="product-{{this.id}}">{{this.title}}
          -
          {{this.description}}
          <button onclick="deleteProduct('{{this.id}}')">Eliminar</button>
        </li>
      {{/each}}
    </ul>

    <h2>Añadir Producto</h2>
    <form id="product-form">
      <input type="text" id="title" placeholder="Title" required />
      <input type="text" id="description" placeholder="Description" required />
      <input type="text" id="code" placeholder="Code" required />
      <input type="number" id="price" placeholder="Price" required />
      <input type="number" id="stock" placeholder="Stock" required />
      <input type="text" id="category" placeholder="Category" required />
      <button type="submit">Añadir Producto</button>
    </form>

    <script src="/socket.io/socket.io.js"></script>
    <script>
      const socket = io();
     document.getElementById('product-form').addEventListener('submit', (e) => {
    e.preventDefault();
    const title = document.getElementById('title').value;
    const description = document.getElementById('description').value;
    const code = document.getElementById('code').value;
    const price = document.getElementById('price').value;
    const stock = document.getElementById('stock').value;
    const category = document.getElementById('category').value;
    socket.emit('addProduct', {
        title, description, code, price, stock, category, thumbnails: []
    });
});
      socket.on('productAdded', (product) => { const productElement =
      document.createElement('li'); productElement.id = `product-${product.id}`;
      productElement.innerHTML = `${product.title} - ${product.description}
      <button onclick="deleteProduct('${product.id}')">Eliminar</button>`;
      document.getElementById('product-list').appendChild(productElement); });
      socket.on('productDeleted', (id) => { const productElement =
      document.getElementById(`product-${id}`); if (productElement) {
      productElement.remove(); } }); function deleteProduct(id) {
      socket.emit('deleteProduct', id); }
    </script>
  </body>
</html>